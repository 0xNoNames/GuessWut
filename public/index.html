<!-- <!doctype html> -->
<html lang="fr">

<head>
    <meta charset="utf-8">
    <title>GuessWut</title>
    <link rel="icon" type="image/png" sizes="256x256" href="/assets/favicon/favicon-256x256.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/assets/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
    <meta name="theme-color" content="#ffffff">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link title="style" rel="stylesheet" href="/assets/css/style.css">
</head>

<script src="/socket.io/socket.io.js"></script>

<body>
    <div id="main" style="display: none;">
        <div id="image"></div>
        <div id="message"></div>
    </div>
    <div id="forms">
        <form id="username_form" action="">
            <input id="username_input" autocomplete="off" /><button>USERNAME</button>
        </form>
        <form id="guess_form" action="" style="display: none;">
            <input id="guess_input" autocomplete="off" /><button>GUESS</button>
        </form>
        <div id="alert_msg"></div>
    </div>
    <script>
        $(function () {
            var socket = io();

            socket.on('alert_msg', (socket_msg) => {
                $('#alert_msg').html(socket_msg);
            });

            socket.on('message', (socket_msg) => {
                $('#message').html(socket_msg);
            });

            socket.on('image', (socket_img) => {
                var image = new Image(600,600);
                image.src = 'data:image/png;base64,' + socket_img;
                $("#image").html(image);
            });

            socket.on('ready', (socket_rdy) => {
                if (socket_rdy) {
                    $("#username_form, #alert_msg").remove();
                    $("#guess_form, #main").show();
                    $("#forms").css("bottom", "5%");
                }
            });

            $("#username_form").submit(function (e) {
                e.preventDefault();
                if ($('#username_input').val() != '') {
                    socket.emit('username', $('#username_input').val());
                }
            });

            $("#guess_form").submit(function (e) {
                e.preventDefault();
                socket.emit('guess', $('#guess_input').val());
                $('#guess_input').val('');
            });
        });
    </script>
</body>

</html>